<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë‚´ ê°œì¸ í™ˆí˜ì´ì§€ - ìŠ¤ë§ˆíŠ¸ ë‹¬ë ¥</title>
  <style>
    :root {
      --primary-color: #4834d4;
      --bg-color: #f8f9fa;
    }
    body { font-family: 'Segoe UI', Arial, sans-serif; background-color: var(--bg-color); margin: 0; padding: 20px; }
    .container { max-width: 800px; margin: 40px auto; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); text-align: center; }

    /* ì»¨íŠ¸ë¡¤ëŸ¬ (ì´ì „/ë‹¤ìŒ ë²„íŠ¼) */
    .calendar-header { display: flex; justify-content: space-between; align-items: center; margin: 20px 0; }
    .nav-btn { background: #eee; border: none; padding: 8px 15px; border-radius: 8px; cursor: pointer; font-weight: bold; transition: 0.2s; }
    .nav-btn:hover { background: var(--primary-color); color: white; }
    #current-month-year { font-size: 1.5rem; font-weight: bold; color: #333; }

    /* ë‹¬ë ¥ í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
    .calendar { width: 100%; border-collapse: collapse; table-layout: fixed; margin-bottom: 20px; }
    .calendar th, .calendar td { border: 1px solid #f1f1f1; padding: 15px 5px; text-align: center; position: relative; }
    .calendar th { background: #f0f4ff; color: var(--primary-color); }
    .calendar td { cursor: pointer; height: 60px; vertical-align: top; }
    .calendar td:hover:not(.empty) { background: #fdfdfd; transform: scale(1.02); box-shadow: inset 0 0 5px rgba(0,0,0,0.05); }
    .sun { color: #e74c3c; } .sat { color: #0984e3; }
    .empty { background: #fafafa; cursor: default; }
    .today { background: #fffbe6 !important; font-weight: bold; border: 2px solid #f1c40f !important; }

    /* ë©”ëª¨ ì•„ì´ì½˜ */
    .memo-dot { display: block; width: 6px; height: 6px; background: #6c5ce7; border-radius: 50%; margin: 5px auto 0; }

    /* ë©”ëª¨ ì…ë ¥ ëª¨ë‹¬/ì˜ì—­ */
    .memo-section { background: #f1f2f6; padding: 15px; border-radius: 12px; margin-top: 20px; display: none; }
    #memo-input { width: 80%; padding: 10px; border-radius: 5px; border: 1px solid #ddd; margin-bottom: 10px; }
    .btn-save { background: var(--primary-color); color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; }
  </style>
</head>
<body>

  <div class="container">
    <h1>My Workspace ğŸš€</h1>
    
    <div class="calendar-header">
      <button class="nav-btn" onclick="changeMonth(-1)">ì´ì „ ë‹¬</button>
      <span id="current-month-year"></span>
      <button class="nav-btn" onclick="changeMonth(1)">ë‹¤ìŒ ë‹¬</button>
    </div>

    <table class="calendar">
      <thead>
        <tr>
          <th class="sun">ì¼</th><th>ì›”</th><th>í™”</th><th>ìˆ˜</th><th>ëª©</th><th>ê¸ˆ</th><th class="sat">í† </th>
        </tr>
      </thead>
      <tbody id="calendar-body"></tbody>
    </table>

    <div id="memo-section" class="memo-section">
      <h3 id="selected-date-display"></h3>
      <input type="text" id="memo-input" placeholder="í•  ì¼ì„ ì…ë ¥í•˜ì„¸ìš”...">
      <button class="btn-save" onclick="saveMemo()">ì €ì¥</button>
    </div>
  </div>

  <script>
    let currentDate = new Date(); // í˜„ì¬ í‘œì‹œë˜ëŠ” ê¸°ì¤€ ë‚ ì§œ
    let selectedDateKey = ""; // ë©”ëª¨ ì €ì¥ìš© í‚¤ (ì˜ˆ: 2026-02-14)

    function renderCalendar() {
      const year = currentDate.getFullYear();
      const month = currentDate.getMonth();
      
      document.getElementById('current-month-year').innerText = `${year}ë…„ ${month + 1}ì›”`;
      
      const firstDay = new Date(year, month, 1).getDay();
      const totalDays = new Date(year, month + 1, 0).getDate();
      const calendarBody = document.getElementById('calendar-body');
      
      calendarBody.innerHTML = '';
      let html = '';
      let day = 1;

      for (let i = 0; i < 6; i++) {
        let row = '<tr>';
        let rowHasDay = false;
        for (let j = 0; j < 7; j++) {
          const cellIndex = i * 7 + j;
          if (cellIndex < firstDay || day > totalDays) {
            row += '<td class="empty"></td>';
          } else {
            const dateKey = `${year}-${month + 1}-${day}`;
            const isToday = new Date().toDateString() === new Date(year, month, day).toDateString();
            const dayClass = (j === 0) ? 'sun' : (j === 6) ? 'sat' : '';
            const todayClass = isToday ? 'today' : '';
            
            // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ë©”ëª¨ê°€ ìˆëŠ”ì§€ í™•ì¸
            const hasMemo = localStorage.getItem(dateKey);
            const memoHtml = hasMemo ? '<span class="memo-dot"></span>' : '';

            row += `<td class="${dayClass} ${todayClass}" onclick="openMemo('${dateKey}')">
                      ${day}${memoHtml}
                    </td>`;
            day++;
            rowHasDay = true;
          }
        }
        row += '</tr>';
        if (rowHasDay) html += row;
      }
      calendarBody.innerHTML = html;
    }

    function changeMonth(delta) {
      currentDate.setMonth(currentDate.getMonth() + delta);
      renderCalendar();
      document.getElementById('memo-section').style.display = 'none';
    }

    function openMemo(dateKey) {
      selectedDateKey = dateKey;
      document.getElementById('memo-section').style.display = 'block';
      document.getElementById('selected-date-display').innerText = `${dateKey} ë©”ëª¨`;
      document.getElementById('memo-input').value = localStorage.getItem(dateKey) || '';
    }

    function saveMemo() {
      const memoText = document.getElementById('memo-input').value;
      if (memoText.trim() === '') {
        localStorage.removeItem(selectedDateKey);
      } else {
        localStorage.setItem(selectedDateKey, memoText);
      }
      alert('ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
      renderCalendar(); // ì  í‘œì‹œë¥¼ ìœ„í•´ ë‹¤ì‹œ ê·¸ë¦¼
    }

    // ì´ˆê¸° ì‹¤í–‰
    renderCalendar();
  </script>
</body>
</html>
